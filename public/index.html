<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      http-equiv="Content-Security-Policy"
      content="
    default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob:;
    script-src 'self' 'unsafe-inline' 'unsafe-eval';
    style-src 'self' 'unsafe-inline';
    connect-src 'self' http://localhost:3001 https://api-student-delivery.greep.io https://*.greep.io wss://api-student-delivery.greep.io wss://*.greep.io;
    object-src 'none';
  "
    />
    <meta
      name="description"
      content="Student Delivery System - Modern OTP-based delivery management"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/White.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <title>Greep SDS</title>
    <script>
      // Suppress React Router future flag warnings
      const originalWarn = console.warn;
      console.warn = function (...args) {
        const message = args[0];
        if (
          typeof message === "string" &&
          (message.includes("React Router Future Flag Warning") ||
            message.includes("v7_startTransition") ||
            message.includes("v7_relativeSplatPath"))
        ) {
          return;
        }
        originalWarn.apply(console, args);
      };

      // Block MetaMask connections
      if (typeof window !== "undefined") {
        // Override ethereum object to prevent MetaMask connections
        Object.defineProperty(window, "ethereum", {
          get: function () {
            console.warn("MetaMask connection blocked");
            return undefined;
          },
          set: function () {
            console.warn("MetaMask connection blocked");
          },
        });

        // Block MetaMask extension messages
        const originalPostMessage = window.postMessage;
        window.postMessage = function (message, targetOrigin, transfer) {
          if (
            message &&
            typeof message === "object" &&
            message.type &&
            (message.type.includes("metamask") ||
              message.type.includes("ethereum"))
          ) {
            console.warn("MetaMask message blocked:", message.type);
            return;
          }
          return originalPostMessage.call(
            this,
            message,
            targetOrigin,
            transfer
          );
        };
      }
    </script>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
  </body>
</html>
